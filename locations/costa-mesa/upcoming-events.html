---
title: 'Costa Mesa: Upcoming Events'
position: 0
nav:
  id: whq-upcoming-events
  site:
    highlight: locations
  side:
    id: costa-mesa
    highlight: whq-upcoming-events
banner:
  image: "/assets/images/topo-banner-bg.jpg"
  title: Costa Mesa HQ
  subtitle: 270 Baker St E, Ste 200, Costa Mesa, CA
---

<h2 class="underline">Upcoming Events</h2>

<div class="upcoming-events"></div>

<script type="text/javascript">
  var promise = Wayfare.Ticketleap.getEvents();
  var customEvents = [
    {% for event in site.events %}
      {
        headline: "{{ event.headline | escape }}",
        description: "{{ event.content | strip_html | strip_newlines }}",
        html_description: "{{ event.content | markdown | strip_newlines }}",
        start_date: "{{ event.dates.start_date }}",
        end_date: "{{ event.dates.end_date }}",
        splash_image: "{{ event.images.splash_image }}",
        thumb_image: "{{ event.images.thumb_image }}",
        ticket_url: "{{ event.urls.ticket_url }}"
      },
    {% endfor %}
  ];
  promise.done(function() {
    var allEvents = _.sortBy(
      _.concat(customEvents, Wayfare.Ticketleap.events),
      function(event) {
        if (event.earliest_start_local) {
          console.log(moment(event.earliest_start_local).format("YYYY-MM-DD H:mm"))
          return moment(event.earliest_start_local).format("YYYY-MM-DD H:mm");
        } else {
          console.log(event.start_date)
          return event.start_date;
        }
      }
    );
    _.each(allEvents, function(event) {
      if (event.hero_small_image_url) {
        var imageTag = '<img data-src="'+event.hero_small_image_url+'" class="img-fetch w-100" data-width="300" data-height="225" data-crop="fill" data-gravity="auto:faces">';
      } else if (event.thumb_image) {
        var imageTag = '<img data-src="/wayfareio'+event.thumb_image+'" class="img-cloud w-100" data-width="300" data-height="225" data-crop="fill" data-gravity="auto:faces">';
      } else {
        var imageTag = '';
      }
      $(".upcoming-events").append(
        '<div data-href="'+(event.url || event.ticket_url)+'" class="card card-event">'+
          '<div class="row">'+
            '<div class="col-xs-12 col-lg-5">'+
              imageTag+
            '</div>'+
            '<div class="col-xs-12 col-lg-7">'+
              '<h3 class="card-title">'+(event.name || event.headline)+'</h3>'+
              '<p class="card-text m-b-0"><strong>'+moment(event.earliest_start_local || event.start_date).format('MMM D, h:mma')+'&mdash;'+moment(event.earliest_end_local || event.end_date).format('h:mma')+'</strong></p>'+
              '<p class="card-text">'+event.description.substring(0, 200)+'...</p>'+
              '<a href="'+(event.url || event.ticket_url)+'" class="btn btn-md btn-primary">Details &amp; Tickets</a>'+
            '</div>'+
          '</div>'+
        '</div>'
      );
    });
    $(".img-fetch").fetchify();
    $(".img-cloud").cloudinary();
  });
</script>

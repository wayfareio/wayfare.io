---
title: 'Costa Mesa: Upcoming Events'
position: 0
nav:
  id: whq-upcoming-events
  site:
    highlight: locations
  side:
    id: costa-mesa
    highlight: whq-upcoming-events
banner:
  image: "/assets/images/topo-banner-bg.jpg"
  title: Costa Mesa HQ
  subtitle: 270 Baker St E, Ste 200, Costa Mesa, CA
---

<h2>Upcoming Events</h2>
<div class="card-columns"></div>

<script type="text/javascript">
  var promise = Wayfare.Ticketleap.getEvents();
  var customEvents = [
    {% for event in site.events %}
      {
        headline: "{{ event.headline | escape }}",
        description: "{{ event.content | newline_to_br }}",
        html_description: "{{ event.content | markdown | strip_newlines }}",
        start_date: "{{ event.dates.start_date }}",
        end_date: "{{ event.dates.end_date }}",
        splash_image: "{{ event.images.splash_image }}",
        thumb_image: "{{ event.images.thumb_image }}",
        ticket_url: "{{ event.urls.ticket_url }}"
      },
    {% endfor %}
  ];
  promise.done(function() {
    var allEvents = _.sortBy(
      _.concat(customEvents, Wayfare.Ticketleap.events),
      function(event) {
        if (event.earliest_start_local) {
          return moment(event.earliest_start_local).format("YYYY-MM-DD H:mm");
        } else {
          return event.start_date;
        }
      }
    );
    _.each(allEvents, function(event) {
      if (event.hero_small_image_url) {
        var imageTag = '<img data-src="'+event.hero_small_image_url+'" class="fetch-image card-img-top img-fluid" data-width="400" data-height="400" data-crop="fill" data-gravity="auto:faces">';
      } else if (event.thumb_image) {
        var imageTag = '<img src="'+event.thumb_image+'" class="card-img-top img-fluid">';
      } else {
        var imageTag = '';
      }
      $(".card-columns").append(
        '<div class="card">'+
          imageTag+
          '<div class="card-block">'+
            '<h3 class="card-title">'+(event.name || event.headline)+'</h3>'+
            '<p><strong>'+moment(event.earliest_start_local || event.start_date).format('MMM D, h:mma')+'&mdash;'+moment(event.earliest_end_local || event.end_date).format('h:mma')+'</strong></p>'+
            event.description.substring(0, [200, 225, 250, 275, 300][Math.floor(Math.random() * 5)])+'...'+
          '</div>'+
        '</div>'
      );
    });
    $(".fetch-image").fetchify();
  });
</script>
